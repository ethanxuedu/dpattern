# dpattern
design pattern

## options pattern(选项模式)
### 优点
1. 支持传递多个参数，并且在参数发生变化时保持兼容性
2. 支持任意顺序传递参数
3. 支持默认值
4. 方便扩展
5. 通过 WithXXX 的函数命名，可以使参数意义更加明确

### 缺点
为了实现选项模式，增加了很多代码

### 适合场景
1. 结构体参数很多，创建结构体时，期望创建一个携带默认值的结构体变量，并选择性修改其中一些参数的值。
2. 构体参数经常变动，变动时又不想修改创建实例的函数。例如：结构体新增一个 retry 参数，但是又不想在 NewConnect 入参列表中添加 retry int 这样的参数声明。

## template pattern(模版模式)
### 介绍
模板模式 (Template Pattern) 定义一个操作中算法的骨架，而将一些步骤延迟到子类中。这种方法让子类在不改变一个算法结构的情况下，就能重新定义该算法的某些特定步骤。

简单来说，模板模式就是将一个类中能够公共使用的方法放置在抽象类中实现，将不能公共使用的方法作为抽象方法，强制子类去实现，这样就做到了将一个类作为一个模板，让开发者去填充需要填充的地方。

### 优点
1. 封装不变部分，扩展可变部分。模板方法模式将可变的部分封装在抽象方法中，不变的部分封装在基本方法中。这使得子类可以根据需求对可变部分进行扩展，而不变部分仍然保持不变。
2. 避免重复代码，抽象类中包含的基本方法可以避免子类重复实现相同的代码逻辑。
3. 更好的扩展性，由于具体实现由子类来完成，因此可以方便地扩展新的功能或变更实现方式，同时不影响模板方法本身。

### 缺点
1. 类多，由于每个算法都需要一个抽象类和具体子类来实现，因此在操作流程比较多时可能导致类的数量急剧增加，从而导致代码的复杂性提高。
2. 关联性高，模板方法与子类实现的抽象方法紧密相关，如果该模板方法需要修改，可能会涉及到多个子类的修改。

### 应用场景
1. 开发框架，通常框架会定义一些通用的模板，子类可以根据自身的特定需求来细化模板的实现细节。
2. 业务逻辑，可以针对业务流程做一些拆解，将特定步骤改为子类实现。比如发送验证码的流程，在发送验证码时需要选择不同厂商来发送验证码，但是发送的验证码前的检查、验证码生成、保存验证码逻辑都是一样的。